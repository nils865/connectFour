(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))l(r);new MutationObserver(r=>{for(const u of r)if(u.type==="childList")for(const c of u.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&l(c)}).observe(document,{childList:!0,subtree:!0});function n(r){const u={};return r.integrity&&(u.integrity=r.integrity),r.referrerpolicy&&(u.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?u.credentials="include":r.crossorigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function l(r){if(r.ep)return;r.ep=!0;const u=n(r);fetch(r.href,u)}})();function y(){}function ce(e){return e()}function X(){return Object.create(null)}function B(e){e.forEach(ce)}function ue(e){return typeof e=="function"}function J(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}let j;function pe(e,t){return j||(j=document.createElement("a")),j.href=t,e===j.href}function ye(e){return Object.keys(e).length===0}function be(e,...t){if(e==null)return y;const n=e.subscribe(...t);return n.unsubscribe?()=>n.unsubscribe():n}function z(e,t,n){e.$$.on_destroy.push(be(t,n))}function Z(e,t,n){return e.set(n),t}function _(e,t){e.appendChild(t)}function O(e,t,n){e.insertBefore(t,n||null)}function S(e){e.parentNode&&e.parentNode.removeChild(e)}function fe(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function g(e){return document.createElement(e)}function ae(e){return document.createTextNode(e)}function I(){return ae(" ")}function H(e,t,n,l){return e.addEventListener(t,n,l),()=>e.removeEventListener(t,n,l)}function d(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function ve(e){return Array.from(e.childNodes)}function ke(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function ee(e,t){for(let n=0;n<e.options.length;n+=1){const l=e.options[n];if(l.__value===t){l.selected=!0;return}}e.selectedIndex=-1}function $e(e){const t=e.querySelector(":checked")||e.options[0];return t&&t.__value}let Q;function P(e){Q=e}const C=[],te=[],M=[],ne=[],xe=Promise.resolve();let K=!1;function we(){K||(K=!0,xe.then(de))}function W(e){M.push(e)}const F=new Set;let x=0;function de(){if(x!==0)return;const e=Q;do{try{for(;x<C.length;){const t=C[x];x++,P(t),Ce(t.$$)}}catch(t){throw C.length=0,x=0,t}for(P(null),C.length=0,x=0;te.length;)te.pop()();for(let t=0;t<M.length;t+=1){const n=M[t];F.has(n)||(F.add(n),n())}M.length=0}while(C.length);for(;ne.length;)ne.pop()();K=!1,F.clear(),P(e)}function Ce(e){if(e.fragment!==null){e.update(),B(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(W)}}const T=new Set;let k;function Le(){k={r:0,c:[],p:k}}function Ee(){k.r||B(k.c),k=k.p}function N(e,t){e&&e.i&&(T.delete(e),e.i(t))}function R(e,t,n,l){if(e&&e.o){if(T.has(e))return;T.add(e),k.c.push(()=>{T.delete(e),l&&(n&&e.d(1),l())}),e.o(t)}else l&&l()}function Be(e){e&&e.c()}function he(e,t,n,l){const{fragment:r,after_update:u}=e.$$;r&&r.m(t,n),l||W(()=>{const c=e.$$.on_mount.map(ce).filter(ue);e.$$.on_destroy?e.$$.on_destroy.push(...c):B(c),e.$$.on_mount=[]}),u.forEach(W)}function me(e,t){const n=e.$$;n.fragment!==null&&(B(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function Se(e,t){e.$$.dirty[0]===-1&&(C.push(e),we(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function _e(e,t,n,l,r,u,c,s=[-1]){const o=Q;P(e);const i=e.$$={fragment:null,ctx:[],props:u,update:y,not_equal:r,bound:X(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(o?o.$$.context:[])),callbacks:X(),dirty:s,skip_bound:!1,root:t.target||o.$$.root};c&&c(i.root);let f=!1;if(i.ctx=n?n(e,t.props||{},(h,$,...A)=>{const a=A.length?A[0]:$;return i.ctx&&r(i.ctx[h],i.ctx[h]=a)&&(!i.skip_bound&&i.bound[h]&&i.bound[h](a),f&&Se(e,h)),$}):[],i.update(),f=!0,B(i.before_update),i.fragment=l?l(i.ctx):!1,t.target){if(t.hydrate){const h=ve(t.target);i.fragment&&i.fragment.l(h),h.forEach(S)}else i.fragment&&i.fragment.c();t.intro&&N(e.$$.fragment),he(e,t.target,t.anchor,t.customElement),de()}P(o)}class ge{$destroy(){me(this,1),this.$destroy=y}$on(t,n){if(!ue(n))return y;const l=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return l.push(n),()=>{const r=l.indexOf(n);r!==-1&&l.splice(r,1)}}$set(t){this.$$set&&!ye(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const w=[];function U(e,t=y){let n;const l=new Set;function r(s){if(J(e,s)&&(e=s,n)){const o=!w.length;for(const i of l)i[1](),w.push(i,e);if(o){for(let i=0;i<w.length;i+=2)w[i][0](w[i+1]);w.length=0}}}function u(s){r(s(e))}function c(s,o=y){const i=[s,o];return l.add(i),l.size===1&&(n=t(r)||y),s(e),()=>{l.delete(i),l.size===0&&(n(),n=null)}}return{set:r,update:u,subscribe:c}}const L=U("It's reds turn"),V=U(!1),E=U("redCoin"),v=7,Y=6;function D(e){const t=document.getElementsByClassName("column");for(let n=0;n<t.length;n++){const l=t[n].children;for(let r=0;r<l.length;r++){const u=l[r].children[0];e(u)}}}function Ae(){let e=null;E.subscribe(t=>e=t),e==="redCoin"?E.set("yellowCoin"):E.set("redCoin")}class p{static addShouldBlink(t){t.classList.add("shouldBlink")}static removeAllShouldBlink(){D(t=>{t.classList.contains("shouldBlink")&&t.classList.remove("shouldBlink")})}static convertAllBlinks(){D(t=>{t.classList.contains("shouldBlink")&&t.classList.add("blink")}),this.removeAllShouldBlink()}}function Ie(){V.set(!1),E.set("redCoin"),L.set("It's reds turn"),D(e=>{e.classList.remove("coin"),e.classList.remove("blink"),e.classList.contains("redCoin")?e.classList.remove("redCoin"):e.classList.contains("yellowCoin")&&e.classList.remove("yellowCoin")})}function le(e){return e.children[0].classList.contains("redCoin")?"redCoin":e.children[0].classList.contains("yellowCoin")?"yellowCoin":null}function Pe(e){const t=e.children;for(let n=t.length-1;n>=0;n--){const l=t[n];if(l.children[0].classList.contains("coin"))continue;let r=null;E.subscribe(c=>r=c),l.children[0].classList.add(r),l.children[0].classList.add("coin");const u={children:t,index:n};return Ae(),u}}function G(e){V.set(!0),e==="redCoin"?L.set("Red won!"):L.set("Yellow won!")}function Ne(e,t){const n=e[t],l=le(n);let r=0;for(let i=t;i<=5;i++){if(l!=le(e[i])){r=0;break}if(p.addShouldBlink(e[i].children[0]),r++,r>=4){G(l);return}}p.removeAllShouldBlink();const c=(i=>parseInt(i.id[i.id.length-1]))(n.parentElement);let s=c;for(let i=c;i>0&&document.getElementById(`column${i-1}`).children[t].children[0].classList.contains(l);i--)s=i-1;r=0;for(let i=s;i<v;i++){const f=document.getElementById(`column${i}`).children[t].children[0];if(f.classList.contains(l))p.addShouldBlink(f),r++;else break;if(r>=4){G(l);return}}p.removeAllShouldBlink();let o={x:c,y:t};for(let i=o.x;i>=0&&!(o.x-1<0||o.y+1>=Y);i--)if(document.getElementById(`column${i-1}`).children[o.y+1].children[0].classList.contains(l))o.x=i-1,o.y=o.y+1;else break;p.addShouldBlink(document.getElementById(`column${o.x}`).children[o.y].children[0]),r=1;for(let i=o.x;i<v&&!(o.x+1>=v||o.y-1<0);i++){const f=document.getElementById(`column${i+1}`).children[o.y-1].children[0];if(f.classList.contains(l))o.x=i+1,o.y=o.y-1,p.addShouldBlink(f),r++;else break;if(r>=4){G(l);return}}p.removeAllShouldBlink(),o={x:c,y:t},p.addShouldBlink(document.getElementById(`column${o.x}`).children[o.y].children[0]);for(let i=o.x;i>=0&&!(o.x-1<0||o.y-1<0);i--)if(document.getElementById(`column${i-1}`).children[o.y-1].children[0].classList.contains(l))o.x=i-1,o.y=o.y-1;else break;r=1;for(let i=o.x;i<v&&!(o.x+1>=v||o.y+1>=Y);i++){const f=document.getElementById(`column${i+1}`).children[o.y+1].children[0];if(f.classList.contains(l))o.x=i+1,o.y=o.y+1,p.addShouldBlink(f),r++;else break;if(r>=4){G(l);return}}p.removeAllShouldBlink()}function ie(e,t,n){const l=e.slice();return l[4]=t[n],l[6]=n,l}function Oe(e,t,n){const l=e.slice();return l[4]=t[n],l}function qe(e){let t;return{c(){t=g("div"),t.innerHTML="<div></div>",d(t,"class","slot svelte-i4tv32")},m(n,l){O(n,t,l)},p:y,d(n){n&&S(t)}}}function oe(e){let t,n,l,r,u=Array(Y),c=[];for(let s=0;s<u.length;s+=1)c[s]=qe(Oe(e,u,s));return{c(){t=g("div");for(let s=0;s<c.length;s+=1)c[s].c();n=I(),d(t,"id","column"+e[6]),d(t,"class","column svelte-i4tv32")},m(s,o){O(s,t,o);for(let i=0;i<c.length;i+=1)c[i].m(t,null);_(t,n),l||(r=H(t,"click",e[1]),l=!0)},p:y,d(s){s&&S(t),fe(c,s),l=!1,r()}}}function je(e){let t,n,l,r,u,c=Array(v),s=[];for(let o=0;o<c.length;o+=1)s[o]=oe(ie(e,c,o));return{c(){t=g("div"),n=g("h1"),l=ae(e[0]),r=I(),u=g("div");for(let o=0;o<s.length;o+=1)s[o].c();d(n,"class","svelte-i4tv32"),d(u,"id","gamefield"),d(u,"class","svelte-i4tv32")},m(o,i){O(o,t,i),_(t,n),_(n,l),_(t,r),_(t,u);for(let f=0;f<s.length;f+=1)s[f].m(u,null)},p(o,[i]){if(i&1&&ke(l,o[0]),i&2){c=Array(v);let f;for(f=0;f<c.length;f+=1){const h=ie(o,c,f);s[f]?s[f].p(h,i):(s[f]=oe(h),s[f].c(),s[f].m(u,null))}for(;f<s.length;f+=1)s[f].d(1);s.length=c.length}},i:y,o:y,d(o){o&&S(t),fe(s,o)}}}function Ge(e,t,n){let l,r,u;z(e,L,s=>n(0,l=s)),z(e,E,s=>n(2,r=s)),z(e,V,s=>n(3,u=s));function c(s){if(u)return;let o=s.target;if(o.classList.contains("coin")&&(o=o.parentElement),o.classList.contains("slot")&&(o=o.parentElement),o.classList.contains("column")&&o.id.startsWith("column")){const i=Pe(o);if(i==null)return;Ne(i.children,i.index)}else return;p.convertAllBlinks(),!u&&(r=="redCoin"?Z(L,l="It's reds turn",l):r=="yellowCoin"&&Z(L,l="It's yellows turn",l))}return[l,c]}class Me extends ge{constructor(t){super(),_e(this,t,Ge,je,J,{})}}function re(e){let t,n;return t=new Me({}),{c(){Be(t.$$.fragment)},m(l,r){he(t,l,r),n=!0},i(l){n||(N(t.$$.fragment,l),n=!0)},o(l){R(t.$$.fragment,l),n=!1},d(l){me(t,l)}}}function se(e){let t;return{c(){t=g("h1"),t.textContent="W.I.P."},m(n,l){O(n,t,l)},d(n){n&&S(t)}}}function Te(e){let t,n,l,r,u,c,s,o,i,f,h,$,A,a=e[0]==="twoPlayer"&&re(),m=e[0]==="onePlayer"&&se();return{c(){t=g("div"),n=g("div"),l=g("img"),u=I(),c=g("select"),s=g("option"),s.textContent="2p",o=g("option"),o.textContent="1p",i=I(),a&&a.c(),f=I(),m&&m.c(),d(l,"id","refresh"),pe(l.src,r="/img/refresh.svg")||d(l,"src",r),d(l,"alt","refresh"),d(l,"draggable","false"),d(l,"class","svelte-hh5ous"),s.__value="twoPlayer",s.value=s.__value,o.__value="onePlayer",o.value=o.__value,d(c,"name","mode"),d(c,"id","mode"),d(c,"class","svelte-hh5ous"),e[0]===void 0&&W(()=>e[2].call(c)),d(n,"id","globalHead"),d(n,"class","svelte-hh5ous"),d(t,"id","mainPage"),d(t,"class","svelte-hh5ous")},m(b,q){O(b,t,q),_(t,n),_(n,l),_(n,u),_(n,c),_(c,s),_(c,o),ee(c,e[0]),_(t,i),a&&a.m(t,null),_(t,f),m&&m.m(t,null),h=!0,$||(A=[H(l,"click",e[1]),H(c,"change",e[2])],$=!0)},p(b,[q]){q&1&&ee(c,b[0]),b[0]==="twoPlayer"?a?q&1&&N(a,1):(a=re(),a.c(),N(a,1),a.m(t,f)):a&&(Le(),R(a,1,1,()=>{a=null}),Ee()),b[0]==="onePlayer"?m||(m=se(),m.c(),m.m(t,null)):m&&(m.d(1),m=null)},i(b){h||(N(a),h=!0)},o(b){R(a),h=!1},d(b){b&&S(t),a&&a.d(),m&&m.d(),$=!1,B(A)}}}function We(e,t,n){let l="twoPlayer";const r=()=>Ie();function u(){l=$e(this),n(0,l)}return[l,r,u]}class ze extends ge{constructor(t){super(),_e(this,t,We,Te,J,{})}}new ze({target:document.getElementById("app")});
