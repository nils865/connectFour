(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))l(r);new MutationObserver(r=>{for(const c of r)if(c.type==="childList")for(const o of c.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&l(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const c={};return r.integrity&&(c.integrity=r.integrity),r.referrerpolicy&&(c.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?c.credentials="include":r.crossorigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function l(r){if(r.ep)return;r.ep=!0;const c=n(r);fetch(r.href,c)}})();function p(){}function ae(e){return e()}function ee(){return Object.create(null)}function S(e){e.forEach(ae)}function de(e){return typeof e=="function"}function J(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}let M;function be(e,t){return M||(M=document.createElement("a")),M.href=t,e===M.href}function we(e){return Object.keys(e).length===0}function $e(e,...t){if(e==null)return p;const n=e.subscribe(...t);return n.unsubscribe?()=>n.unsubscribe():n}function R(e,t,n){e.$$.on_destroy.push($e(t,n))}function te(e,t,n){return e.set(n),t}function _(e,t){e.appendChild(t)}function N(e,t,n){e.insertBefore(t,n||null)}function E(e){e.parentNode&&e.parentNode.removeChild(e)}function he(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function m(e){return document.createElement(e)}function ke(e){return document.createTextNode(e)}function P(){return ke(" ")}function z(e,t,n,l){return e.addEventListener(t,n,l),()=>e.removeEventListener(t,n,l)}function a(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function Ce(e){return Array.from(e.childNodes)}function ne(e,t){for(let n=0;n<e.options.length;n+=1){const l=e.options[n];if(l.__value===t){l.selected=!0;return}}e.selectedIndex=-1}function Le(e){const t=e.querySelector(":checked")||e.options[0];return t&&t.__value}let Q;function O(e){Q=e}const C=[],le=[],F=[],re=[],xe=Promise.resolve();let D=!1;function Be(){D||(D=!0,xe.then(_e))}function T(e){F.push(e)}const W=new Set;let $=0;function _e(){if($!==0)return;const e=Q;do{try{for(;$<C.length;){const t=C[$];$++,O(t),Ae(t.$$)}}catch(t){throw C.length=0,$=0,t}for(O(null),C.length=0,$=0;le.length;)le.pop()();for(let t=0;t<F.length;t+=1){const n=F[t];W.has(n)||(W.add(n),n())}F.length=0}while(C.length);for(;re.length;)re.pop()();D=!1,W.clear(),O(e)}function Ae(e){if(e.fragment!==null){e.update(),S(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(T)}}const H=new Set;let v;function Se(){v={r:0,c:[],p:v}}function Ee(){v.r||S(v.c),v=v.p}function q(e,t){e&&e.i&&(H.delete(e),e.i(t))}function K(e,t,n,l){if(e&&e.o){if(H.has(e))return;H.add(e),v.c.push(()=>{H.delete(e),l&&(n&&e.d(1),l())}),e.o(t)}else l&&l()}function Ie(e){e&&e.c()}function me(e,t,n,l){const{fragment:r,after_update:c}=e.$$;r&&r.m(t,n),l||T(()=>{const o=e.$$.on_mount.map(ae).filter(de);e.$$.on_destroy?e.$$.on_destroy.push(...o):S(o),e.$$.on_mount=[]}),c.forEach(T)}function pe(e,t){const n=e.$$;n.fragment!==null&&(S(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function Pe(e,t){e.$$.dirty[0]===-1&&(C.push(e),Be(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function ge(e,t,n,l,r,c,o,i=[-1]){const u=Q;O(e);const s=e.$$={fragment:null,ctx:[],props:c,update:p,not_equal:r,bound:ee(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(u?u.$$.context:[])),callbacks:ee(),dirty:i,skip_bound:!1,root:t.target||u.$$.root};o&&o(s.root);let g=!1;if(s.ctx=n?n(e,t.props||{},(d,w,...I)=>{const f=I.length?I[0]:w;return s.ctx&&r(s.ctx[d],s.ctx[d]=f)&&(!s.skip_bound&&s.bound[d]&&s.bound[d](f),g&&Pe(e,d)),w}):[],s.update(),g=!0,S(s.before_update),s.fragment=l?l(s.ctx):!1,t.target){if(t.hydrate){const d=Ce(t.target);s.fragment&&s.fragment.l(d),d.forEach(E)}else s.fragment&&s.fragment.c();t.intro&&q(e.$$.fragment),me(e,t.target,t.anchor,t.customElement),_e()}O(u)}class ye{$destroy(){pe(this,1),this.$destroy=p}$on(t,n){if(!de(n))return p;const l=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return l.push(n),()=>{const r=l.indexOf(n);r!==-1&&l.splice(r,1)}}$set(t){this.$$set&&!we(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const k=[];function U(e,t=p){let n;const l=new Set;function r(i){if(J(e,i)&&(e=i,n)){const u=!k.length;for(const s of l)s[1](),k.push(s,e);if(u){for(let s=0;s<k.length;s+=2)k[s][0](k[s+1]);k.length=0}}}function c(i){r(i(e))}function o(i,u=p){const s=[i,u];return l.add(s),l.size===1&&(n=t(r)||p),i(e),()=>{l.delete(s),l.size===0&&(n(),n=null)}}return{set:r,update:c,subscribe:o}}const L=U(`It's <span style="color: red">reds</span> turn`),V=U(!1),x=U("redCoin"),G=7,X=6;function Y(e){const t=document.getElementsByClassName("column");for(let n=0;n<t.length;n++){const l=t[n].children;for(let r=0;r<l.length;r++){const c=l[r].children[0];e(c)}}}function Oe(){let e=null;x.subscribe(t=>e=t),e==="redCoin"?x.set("yellowCoin"):x.set("redCoin")}class b{static addShouldBlink(t){t.classList.add("shouldBlink")}static removeAllShouldBlink(){Y(t=>{t.classList.contains("shouldBlink")&&t.classList.remove("shouldBlink")})}static convertAllBlinks(){Y(t=>{t.classList.contains("shouldBlink")&&t.classList.add("blink")}),this.removeAllShouldBlink()}}function qe(){V.set(!1),x.set("redCoin"),L.set(`It's <span style="color: red">reds</span> turn`),Y(e=>{e.classList.remove("coin"),e.classList.remove("blink"),e.classList.contains("redCoin")?e.classList.remove("redCoin"):e.classList.contains("yellowCoin")&&e.classList.remove("yellowCoin")})}function A(e){return e.children[0].classList.contains("redCoin")?"redCoin":e.children[0].classList.contains("yellowCoin")?"yellowCoin":null}function Ne(e){const t=e.children;for(let n=t.length-1;n>=0;n--){const l=t[n];if(l.children[0].classList.contains("coin"))continue;let r=null;x.subscribe(o=>r=o),l.children[0].classList.add(r),l.children[0].classList.add("coin");const c={children:t,index:n};return Oe(),c}}function je(e){V.set(!0),e==="redCoin"?L.set('<span style="color: red">Red</span> won!'):L.set('<span style="color: yellow">Yellow</span> won!')}function Z(e,t){return e>=4?(je(t),b.convertAllBlinks(),!0):!1}const ve=e=>parseInt(e.parentElement.id[e.parentElement.id.length-1]),B=e=>document.getElementsByClassName("column")[e.x].children[e.y],ie=e=>e.x<G&&e.x>=0&&e.y<X&&e.y>=0;function Me(e,t,n){let l=0;for(let r=n;r<X&&t==A(e[r]);r++)b.addShouldBlink(e[r].children[0]),l++;return Z(l,t)?!0:(b.removeAllShouldBlink(),!1)}function Fe(e,t,n){let l=-1;for(let c=ve(e[n]);c>=0&&l<0;c--)t!=A(B({x:c,y:n}))&&(l=c);l++;let r=0;for(let c=l;c<G&&t===A(B({x:c,y:n}));c++)b.addShouldBlink(B({x:c,y:n}).children[0]),r++;return Z(r,t)?!0:(b.removeAllShouldBlink(),!1)}function oe(e,t,n,l,r){const c={x:ve(e[n]),y:n};let o=l(c);for(;ie(r(o))&&A(B(r(o)))===t;)o=r(o);let i=r(o),u=0;for(;ie(l(i))&&A(B(l(i)))==t;)i=l(i),b.addShouldBlink(B(i).children[0]),u++;return Z(u,t)?!0:(b.removeAllShouldBlink(),!1)}function He(e,t){const n=A(e[t]);let l=!1;return Me(e,n,t)&&(l=!0),Fe(e,n,t)&&(l=!0),oe(e,n,t,r=>({x:r.x+1,y:r.y-1}),r=>({x:r.x-1,y:r.y+1}))&&(l=!0),oe(e,n,t,r=>({x:r.x-1,y:r.y-1}),r=>({x:r.x+1,y:r.y+1}))&&(l=!0),l}function se(e,t,n){const l=e.slice();return l[4]=t[n],l[6]=n,l}function Te(e,t,n){const l=e.slice();return l[4]=t[n],l}function Ge(e){let t;return{c(){t=m("div"),t.innerHTML="<div></div>",a(t,"class","slot svelte-i4tv32")},m(n,l){N(n,t,l)},p,d(n){n&&E(t)}}}function ce(e){let t,n,l,r,c=Array(X),o=[];for(let i=0;i<c.length;i+=1)o[i]=Ge(Te(e,c,i));return{c(){t=m("div");for(let i=0;i<o.length;i+=1)o[i].c();n=P(),a(t,"id","column"+e[6]),a(t,"class","column svelte-i4tv32")},m(i,u){N(i,t,u);for(let s=0;s<o.length;s+=1)o[s].m(t,null);_(t,n),l||(r=z(t,"click",e[1]),l=!0)},p,d(i){i&&E(t),he(o,i),l=!1,r()}}}function Re(e){let t,n,l,r,c=Array(G),o=[];for(let i=0;i<c.length;i+=1)o[i]=ce(se(e,c,i));return{c(){t=m("div"),n=m("h1"),l=P(),r=m("div");for(let i=0;i<o.length;i+=1)o[i].c();a(n,"class","svelte-i4tv32"),a(r,"id","gamefield"),a(r,"class","svelte-i4tv32")},m(i,u){N(i,t,u),_(t,n),n.innerHTML=e[0],_(t,l),_(t,r);for(let s=0;s<o.length;s+=1)o[s].m(r,null)},p(i,[u]){if(u&1&&(n.innerHTML=i[0]),u&2){c=Array(G);let s;for(s=0;s<c.length;s+=1){const g=se(i,c,s);o[s]?o[s].p(g,u):(o[s]=ce(g),o[s].c(),o[s].m(r,null))}for(;s<o.length;s+=1)o[s].d(1);o.length=c.length}},i:p,o:p,d(i){i&&E(t),he(o,i)}}}function We(e,t,n){let l,r,c;R(e,L,i=>n(0,l=i)),R(e,x,i=>n(2,r=i)),R(e,V,i=>n(3,c=i));function o(i){if(c)return;let u=i.target;if(u.classList.contains("coin")&&(u=u.parentElement),u.classList.contains("slot")&&(u=u.parentElement),u.classList.contains("column")&&u.id.startsWith("column")){const s=Ne(u);if(s==null)return;He(s.children,s.index)}else return;c||(r=="redCoin"?te(L,l=`It's <span style="color: red">reds</span> turn`,l):r=="yellowCoin"&&te(L,l=`It's <span style="color: yellow">yellows</span> turn`,l))}return[l,o]}class ze extends ye{constructor(t){super(),ge(this,t,We,Re,J,{})}}function ue(e){let t,n;return t=new ze({}),{c(){Ie(t.$$.fragment)},m(l,r){me(t,l,r),n=!0},i(l){n||(q(t.$$.fragment,l),n=!0)},o(l){K(t.$$.fragment,l),n=!1},d(l){pe(t,l)}}}function fe(e){let t;return{c(){t=m("h1"),t.textContent="W.I.P."},m(n,l){N(n,t,l)},d(n){n&&E(t)}}}function De(e){let t,n,l,r,c,o,i,u,s,g,d,w,I,f=e[0]==="twoPlayer"&&ue(),h=e[0]==="onePlayer"&&fe();return{c(){t=m("div"),n=m("div"),l=m("img"),c=P(),o=m("select"),i=m("option"),i.textContent="2p",u=m("option"),u.textContent="1p",s=P(),f&&f.c(),g=P(),h&&h.c(),a(l,"id","refresh"),be(l.src,r="./img/refresh.svg")||a(l,"src",r),a(l,"alt","refresh"),a(l,"draggable","false"),a(l,"class","svelte-1nn4l1m"),i.__value="twoPlayer",i.value=i.__value,u.__value="onePlayer",u.value=u.__value,a(o,"name","mode"),a(o,"id","mode"),a(o,"class","svelte-1nn4l1m"),e[0]===void 0&&T(()=>e[2].call(o)),a(n,"id","globalHead"),a(n,"class","svelte-1nn4l1m"),a(t,"id","mainPage"),a(t,"class","svelte-1nn4l1m")},m(y,j){N(y,t,j),_(t,n),_(n,l),_(n,c),_(n,o),_(o,i),_(o,u),ne(o,e[0]),_(t,s),f&&f.m(t,null),_(t,g),h&&h.m(t,null),d=!0,w||(I=[z(l,"click",e[1]),z(o,"change",e[2])],w=!0)},p(y,[j]){j&1&&ne(o,y[0]),y[0]==="twoPlayer"?f?j&1&&q(f,1):(f=ue(),f.c(),q(f,1),f.m(t,g)):f&&(Se(),K(f,1,1,()=>{f=null}),Ee()),y[0]==="onePlayer"?h||(h=fe(),h.c(),h.m(t,null)):h&&(h.d(1),h=null)},i(y){d||(q(f),d=!0)},o(y){K(f),d=!1},d(y){y&&E(t),f&&f.d(),h&&h.d(),w=!1,S(I)}}}function Ke(e,t,n){let l="twoPlayer";const r=()=>qe();function c(){l=Le(this),n(0,l)}return[l,r,c]}class Ye extends ye{constructor(t){super(),ge(this,t,Ke,De,J,{})}}new Ye({target:document.getElementById("app")});
